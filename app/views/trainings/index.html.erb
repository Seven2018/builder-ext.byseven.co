<div class="container-seven-large" style="background-color: white">
  <div id="page-controls">
    <h1>Trainings</h1>
    <div id="page-buttons">
      <% if params[:user] %>
        <%= simple_form_for :search, url: trainings_path, method: 'GET' do |f| %>
          <% if params[:search].present? %>
            <%= f.input :title, placeholder: 'Search', label: false, input_html: {value: params[:search][:title]} %>
          <% else %>
            <%= f.input :title, placeholder: 'Search', label: false %>
          <% end %>
          <%= f.input :user, as: :hidden, input_html: { value: params[:user] } %>
          <%= hidden_field_tag :page, 1 %>
          <% if params[:search] %>
            <%= link_to trainings_path(page: 1), class: 'training-search-close' do %>
              <i class="far fa-times-circle"></i>
            <% end %>
          <% end %>
        <% end %>
      <% else %>
        <%= simple_form_for :search, url: trainings_path, method: 'GET' do |f| %>
          <% if params[:search].present? %>
            <%= f.input :title, placeholder: 'Search', label: false, input_html: {value: params[:search][:title]} %>
          <% else %>
            <%= f.input :title, placeholder: 'Search', label: false %>
          <% end %>
          <%= hidden_field_tag :page, 1 %>
          <% if params[:search] %>
            <%= link_to trainings_path(page: 1), class: 'training-search-close' do %>
              <i class="far fa-times-circle"></i>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
      <%= link_to new_training_path do %>
        <button class="btn btn-edit-yellow">New Training</button>
      <% end %>
    </div>
  </div>
  <div class="trainings-title">
    <% if params[:search] %>
      <ul class="nav nav-tabs">
        <li><p class="active">Search</p></li>
      </ul>
    <% else %>
      <ul class="nav nav-tabs">
        <% if params[:tab].nil? || params[:tab] == 'upcoming' %>
          <!-- <li role="presentation"><a href="#upcoming" data-toggle="tab" class="active">Upcoming</a></li> -->
          <li role="presentation"><a href="#upcoming" data-toggle="tab" class="active">Upcoming</a></li>
          <li role="presentation"><a href="#completed" data-toggle="tab" id='completed_tab'>Completed</a></li>
          <li role="presentation"><a href="#to_date" data-toggle="tab">To Date</a></li>
          <li role="presentation"><a href="#to_staff" data-toggle="tab">To Staff</a></li>
        <% elsif params[:tab] == 'completed' %>
          <li role="presentation"><a href="#upcoming" data-toggle="tab">Upcoming</a></li>
          <li role="presentation"><a href="#completed" data-toggle="tab" class="active">Completed</a></li>
          <li role="presentation"><a href="#to_date" data-toggle="tab">To Date</a></li>
          <li role="presentation"><a href="#to_staff" data-toggle="tab">To Staff</a></li>
        <% elsif params[:tab] == 'to_date' %>
          <li role="presentation"><a href="#upcoming" data-toggle="tab">Upcoming</a></li>
          <li role="presentation"><a href="#completed" data-toggle="tab">Completed</a></li>
          <li role="presentation"><a href="#to_date" data-toggle="tab" class="active">To Date</a></li>
          <li role="presentation"><a href="#to_staff" data-toggle="tab">To Staff</a></li>
        <% elsif params[:tab] == 'to_staff' %>
          <li role="presentation"><a href="#upcoming" data-toggle="tab">Upcoming</a></li>
          <li role="presentation"><a href="#completed" data-toggle="tab">Completed</a></li>
          <li role="presentation"><a href="#to_date" data-toggle="tab">To Date</a></li>
          <li role="presentation"><a href="#to_staff" data-toggle="tab" class="active">To Staff</a></li>
        <% end %>
      </ul>
    <% end %>
  </div>
  <div class="tab-content">
    <% if params[:search] %>
      <div class="tab-pane active">
        <%= render 'search', trainings: @trainings %>
      </div>
    <% else params[:tab].nil? || params[:tab] == 'all' %>
      <div role="tabpanel" class="tab-pane active" id="upcoming">
        <%= render_async index_upcoming_path(page: params[:page]) %>
      </div>
      <div role="tabpanel" class="tab-pane" id="completed">
        <%= render_async index_completed_path(page: 1), toggle: { selector: '#completed_tab', event: :click } %>
      </div>
      <div role="tabpanel" class="tab-pane" id="to_date">
        <%= render 'to_date', trainings: @trainings %>
      </div>
      <div role="tabpanel" class="tab-pane" id="to_staff">
        <%= render 'to_staff', trainings: @trainings %>
      </div>
    <% end %>
  </div>
</div>
