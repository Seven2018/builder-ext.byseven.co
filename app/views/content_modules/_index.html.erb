<div class="workshop-middle-info-main">
  <h4>Modules</h4>
</div>
<% if @content.content_modules.present? %>
  <div class="no-workshop">
   <h5>Sorry, there are no modules for this workshop.</h5>
   <h5>Create a module <%= link_to new_content_content_module_path(@content) do %> <u>here.</u><% end %>
  </h5>
  </div>
  <% else %>
    <% @content.content_modules.order('position ASC').each do |mod| %>
      <div class='module-card'>
        <div class="module-card-main">
          <div class="module-card-infos">
            <h4><%= link_to mod.title, content_content_module_path(@content, mod) %></h4>
            <div class='module-card-instructions'><%= mod.instructions.html_safe %></div>
          </div>
          <div class='module-card-controls'>
            <p><%= mod.duration %> min</p>
            <%= link_to edit_content_content_module_path(mod.content, mod), data: { toggle: 'tooltip' }, title: 'Edit', class: 'btn return-arrow' do %>
              <i class="fas fa-pen"></i>
            <% end %>
            <%= link_to content_content_module_path(mod.content, mod), method: :delete, data: { toggle: 'tooltip', confirm: 'Are you sure ?'}, title: 'Delete', class: 'btn return-arrow' do %>
              <i class="fas fa-trash-alt"></i>
            <% end %>
            <% if mod.position == 1 %>
              <a class='btn return-arrow'><i class="fas fa-arrow-up" style='color:grey;cursor:default;'></i></a>
            <% else %>
              <%= link_to content_move_up_content_module_path(mod.content, mod), data: { toggle: 'tooltip' }, title: 'Move up', remote: true, class: 'btn return-arrow' do %>
                <i class="fas fa-arrow-up"></i>
              <% end %>
            <% end %>
            <% if mod.position ==  @content.content_modules.count %>
              <a class='btn return-arrow'><i class="fas fa-arrow-down" style='color:grey;cursor:default;'></i></a>
            <% else %>
              <%= link_to content_move_down_content_module_path(mod.content, mod), data: { toggle: 'tooltip' }, title: 'Move down', remote: true, class: 'btn return-arrow' do %>
                <i class="fas fa-arrow-down"></i>
              <% end %>
            <% end %>
          </div>
        </div>
        <div class="module-card-footer">
          <% if mod.logistics %>
            <div class='content-logistics'>
              <p class='logistics-label'>Logistics:</p><br>
              <ul><li><%= mod.logistics.html_safe %></ul></li>
            </div>
          <% end %>
          <% if !mod.action1.nil? && !mod.action2.nil? %>
            <div class='content-actions'>
            <p class='logistics-label'>Actions:</p>
             <ul><li><%= mod.action1.name %></ul></li>
             <ul><li><%= mod.action2.name %></ul></li>
           </div>
          <% elsif !mod.action1.nil? %>
            <div class='content-actions'>
            <p class='logistics-label'>Actions:</p>
             <ul><li><%= mod.action1.name %></ul></li>
           </div>
          <% elsif !mod.action2.nil? %>
            <div class='content-actions'>
            <p class='logistics-label'>Actions:</p>
             <ul><li><%= mod.action2.name %></ul></li>
           </div>
          <% end %>
        </div>
      </div>
    <% end %>
  <% end %>

