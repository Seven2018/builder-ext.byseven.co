<div class="workshop-middle-info-main">
  <h4>Modules</h4>
  <%= link_to new_content_content_module_path(@content) do %>
    <button class="btn btn-edit">New Module</button>
  <% end %>
</div>
<% @content.content_modules.order('position ASC').each do |mod| %>
  <div class='module-card'>
    <div class="module-card-main">
      <div class="module-card-infos">
        <h4><%= link_to mod.title, content_content_module_path(@content, mod) %></h4>
        <div class='module-card-instructions'><%= mod.instructions.html_safe %></div>
      </div>
      <div class='module-card-controls'>
        <p><%= mod.duration %> min</p>
        <%= link_to edit_content_content_module_path(mod.content, mod), class: 'btn return-arrow' do %>
          <i class="fas fa-pen"></i>
        <% end %>
        <%= link_to content_content_module_path(mod.content, mod), method: :delete, data: { confirm: 'Are you sure ?'}, class: 'btn return-arrow' do %>
          <i class="fas fa-trash-alt"></i>
        <% end %>
        <% if mod.position == 1 %>
          <a class='btn return-arrow'><i class="fas fa-arrow-up" style='color:grey;cursor:default;'></i></a>
        <% else %>
          <%= link_to move_up_content_module_path(mod), remote: true, class: 'btn return-arrow' do %>
            <i class="fas fa-arrow-up"></i>
          <% end %>
        <% end %>
        <% if mod.position ==  @content.content_modules.count %>
          <a class='btn return-arrow'><i class="fas fa-arrow-down" style='color:grey;cursor:default;'></i></a>
        <% else %>
          <%= link_to move_down_content_module_path(mod), remote: true, class: 'btn return-arrow' do %>
            <i class="fas fa-arrow-down"></i>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="module-card-footer">
      <% if mod.logistics %>
        <div class='content-logistics'><p class='logistics-label'>Logistics : </p><div><%= mod.logistics.html_safe %></div></div>
      <% end %>
      <% if !mod.action1.nil? && !mod.action2.nil? %>
        <p class='content-actions'>Action 1 : <%= mod.action1.name %></p>
        <p class='content-actions'>Action 2 : <%= mod.action2.name %></p>
      <% elsif !mod.action1.nil? %>
        <p class='content-actions'>Action participant 1 : <%= mod.action1.name %></p>
      <% elsif !mod.action2.nil? %>
        <p class='content-actions'>Action participant 2 : <%= mod.action2.name %></p>
      <% end %>
    </div>
  </div>
<% end %>

